
#### WARNING
WARNING: use rotate_bound, not rotate for filter images? 


#######
Fix lobe filter stuff for tissue

optimizer  
- img
- filter 1, thersholds 1, annotated 1
- filter 2, thersholds 2, annotated 2 
- filter approach (simple, etc)


test
- img
(by order of largest integarted intensity)
- filter 1, thresh 1
- filter 2, thresh 2
..
return unclass 
return noisefloor



## Dylan 
- results are 'nan' for validation.py 
-- stackedHITs messed up? 
- DONE need annotated images for WT and CHF as well 
- DONE add in unit test (e.g. if assert(content-truth>abs,"somthing changed)" 


## Ryan 
-DONE Integrate MF stuff into gpu code
-DONE test by running unit tests 

## PKH 
- DONE port over/refactor MF code for both silica and myo 
- DONE verify that ROC is working 
-DONE generalize ROC curve generation that is currently defined in fig.py (probably port to optimizer) 
-- DONE Extract silica-specific terms in TestParams()
-- DONE Merge roc generation from figs into optimizer
-- DONE generalize how annotated data is passed in (subregion vs channel)

- finalize non-penalty filter response (put in hierarchy of loss, then LT, then TT, then unchar)  
(which notebook?) 
- implement pentalty filter stuff 
-- look into Dylan's penalty filter formulation
-- determine if this can be frontloaded into filter definition, e.g. 
  snr = y
  y= f'm/(C + p *P)  <--- prev definition 
     f = mf, m = measured, P = penality (verify) 
  h' = f/(C + pP) 
=>y = h'm (s.b. equiv to Dylan's form) 
  Could also do 
  P=fi - mean(fj), instead of P=mean(fj) 
- modify filter to notch out clutter in tissue 
  m = s + n + c
  m =     n + c 
  M = F{m} 
  M' = M/F{s}
  

- Finish GPU implementation (./gpu)

 - check edges
 - blur responses to show TT loss regions 

- put onto athena 
- non-gpu version with test input data; need instructions on how to pass in data, optimize parameters  
